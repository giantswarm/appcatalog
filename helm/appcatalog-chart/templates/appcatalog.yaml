apiVersion: "application.giantswarm.io/v1alpha1"
kind: AppCatalog
metadata:
  name: "{{ .Values.appCatalog.name }}"
  labels:
    application.giantswarm.io/catalog-type: "{{ .Values.appCatalog.catalogType }}"
    app-operator.giantswarm.io/version: "{{ .Values.appOperator.version }}"
spec:
  title: "{{ .Values.appCatalog.title }}"
  description: "{{ .Values.appCatalog.description }}"
  logoURL: "{{ .Values.appCatalog.logoURL }}"
  storage:
    type: "helm"
    URL: "{{ .Values.appCatalog.storage.URL }}"
  {{- if .Values.appCatalog.config }}
  config:
    {{- if or ( and .Values.appCatalog.config .Values.appCatalog.config.configMap .Values.appCatalog.config.configMap.values) ( ! .Values.appCatalog.managed ) }}
    configMap:
      name: "{{ include "resource.configmap.name" . }}"
      namespace: "{{ .Values.appCatalog.config.configMap.namespace }}"
    {{- end }}
    {{- if or ( and .Values.appCatalog.config .Values.appCatalog.config.secret .Values.appCatalog.config.secret.values) ( ! .Values.appCatalog.managed ) }}
    secret:
      name: "{{ include "resource.secret.name" . }}"
      namespace: "{{ .Values.appCatalog.config.secret.namespace }}"
    {{- end }}
  {{- end }}
